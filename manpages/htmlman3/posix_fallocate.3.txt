

Linux
          manual pages
Section 3
 

 
 

Name
posix_fallocate — allocate file space

Synopsis

#include <fcntl.h>

int
            posix_fallocate(
int fd,

 
off_t offset,

 
off_t len);

           
        

Note

Feature Test Macro Requirements
                      for glibc (see feature_test_macros(7)):

posix_fallocate():

_XOPEN_SOURCE
                      >= 600 || _POSIX_C_SOURCE >=
                      200112L

 
DESCRIPTION
The function posix_fallocate() ensures that disk space
      is allocated for the file referred to by the descriptor
      fd for the bytes in
      the range starting at offset and continuing for
      len bytes. After a
      successful call to posix_fallocate(), subsequent writes to
      bytes in the specified range are guaranteed not to fail
      because of lack of disk space.
If the size of the file is less than offset+len, then the file is increased
      to this size; otherwise the file size is left unchanged.

 
RETURN VALUE
posix_fallocate() returns
      zero on success, or an error number on failure. Note that
      errno is not set.

 
ERRORS

EBADF

fd is not a
            valid file descriptor, or is not opened for
            writing.

EFBIG

offset+len
            exceeds the maximum file size.

EINVAL

offset was
            less than 0, or len was less than or
            equal to 0.

ENODEV

fd does not
            refer to a regular file.

ENOSPC

There is not enough space left on the device
            containing the file referred to by fd.

ESPIPE

fd refers to
            a pipe.

 
VERSIONS
posix_fallocate() is
      available since glibc 2.1.94.

 
CONFORMING TO
POSIX.1-2001.
POSIX.1-2008 says that an implementation shall give the EINVAL error if len was 0, or offset was less than 0.
      POSIX.1-2001 says that an implementation shall give the EINVAL error if len is less than 0, or
      offset was less than
      0, and may give the error if
      len equals zero.

 
SEE ALSO
fallocate(2), lseek(2), posix_fadvise(2)

 
COLOPHON
This page is part of release 3.33 of the Linux man-pages project. A
      description of the project, and information about reporting
      bugs, can be found at http://man7.org/linux/man-pages/.

                    Copyright (c) 2006, Michael Kerrisk <mtk.manpagesdocument.write('@');(@)gmail.com>

                  Permission is granted to make and distribute verbatim copies of this

                  manual provided the copyright notice and this permission notice are

                  preserved on all copies.

                  Permission is granted to copy and distribute modified versions of this

                  manual under the conditions for verbatim copying, provided that the

                  entire resulting derived work is distributed under the terms of a

                  permission notice identical to this one.

                  Since the Linux kernel and libraries are constantly changing, this

                  manual page may be incorrect or out-of-date.  The author(s) assume no

                  responsibility for errors or omissions, or for damages resulting from

                  the use of the information contained herein.  The author(s) may not

                  have taken the same level of care in the production of this manual,

                  which is licensed free of charge, as they might when working

                  professionally.

                  Formatted or processed versions of this manual, if unaccompanied by

                  the source, must acknowledge the copyright and authors of this work.

