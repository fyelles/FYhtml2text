

Linux
          manual pages
Section 3
 

 
 

Name
mbstowcs — convert a multibyte string to a
      wide-character string

Synopsis

#include <stdlib.h>

size_t
            mbstowcs(
wchar_t *dest,

 
const char *src,

 
size_t n);

           
        

 
DESCRIPTION
If dest is not a
      NULL pointer, the mbstowcs()
      function converts the multibyte string src to a wide-character string
      starting at dest. At
      most n wide
      characters are written to dest. The conversion starts in
      the initial state. The conversion can stop for three
      reasons:

An invalid multibyte sequence has been encountered.
            In this case (size_t)
            −1 is returned.

n non-L'\0'
            wide characters have been stored at dest. In this case the
            number of wide characters written to dest is returned, but the
            shift state at this point is lost.

The multibyte string has been completely converted,
            including the terminating null wide character ('\0').
            In this case the number of wide characters written to
            dest, excluding
            the terminating null wide character, is returned.

The programmer must ensure that there is room for at least
      n wide characters at
      dest.
If dest is NULL,
      n is ignored, and the
      conversion proceeds as above, except that the converted wide
      characters are not written out to memory, and that no length
      limit exists.
In order to avoid the case 2 above, the programmer should
      make sure n is
      greater or equal to mbstowcs(NULL,src,0)+1.

 
RETURN VALUE
The mbstowcs() function
      returns the number of wide characters that make up the
      converted part of the wide-character string, not including
      the terminating null wide character. If an invalid multibyte
      sequence was encountered, (size_t)
      −1 is returned.

 
CONFORMING TO
C99.

 
NOTES
The behavior of mbstowcs()
      depends on the LC_CTYPE
      category of the current locale.
The function mbsrtowcs(3) provides a
      better interface to the same functionality.

 
SEE ALSO
mbsrtowcs(3), wcstombs(3)

 
COLOPHON
This page is part of release 3.35 of the Linux man-pages project. A
      description of the project, and information about reporting
      bugs, can be found at http://man7.org/linux/man-pages/.

                    Copyright (c) Bruno Haible <haibledocument.write('@');(@)clisp.cons.org>

                  This is free documentation; you can redistribute it and/or

                  modify it under the terms of the GNU General Public License as

                  published by the Free Software Foundation; either version 2 of

                  the License, or (at your option) any later version.

                  References consulted:
                    GNU glibc-2 source code and manual

                    Dinkumware C library reference http://www.dinkumware.com/

                    OpenGroup's Single UNIX specification http://www.UNIX-systems.org/online.html

                    ISO/IEC 9899:1999

