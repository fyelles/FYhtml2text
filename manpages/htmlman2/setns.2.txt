

Linux
          manual pages
Section 2
 

 
 

Name
setns — reassociate thread with a namespace

Synopsis

#define _GNU_SOURCE              /* See feature_test_macros(7) */
#include <sched.h>

int
            setns(
int fd,

 
int nstype);

           
        

 
DESCRIPTION
Given a file descriptor referring to a namespace,
      reassociate the calling thread with that namespace.
The fd argument is
      a file descriptor referring to one of the namespace entries
      in a /proc/[pid]/ns/ directory;
      see proc(5) for further
      information on /proc/[pid]/ns/.
      The calling thread will be reassociated with the
      corresponding namespace, subject to any constraints imposed
      by the nstype
      argument.
The nstype
      argument specifies which type of namespace the calling thread
      may be reassociated with. This argument can have one of the
      following values:

0

Allow any type of namespace to be joined.

CLONE_NEWIPC

fd must
            refer to an IPC namespace.

CLONE_NEWNET

fd must
            refer to a network namespace.

CLONE_NEWUTS

fd must
            refer to a UTS namespace.

Specifying nstype
      as 0 suffices if the caller knows (or does not care) what
      type of namespace is referred to by fd. Specifying a nonzero value
      for nstype is useful
      if the caller does not know what type of namespace is
      referred to by fd and
      wants to ensure that the namespace is of a particular type.
      (The caller might not know the type of the namespace referred
      to by fd if the file
      descriptor was opened by another process and, for example,
      passed to the caller via a UNIX domain socket.)

 
RETURN VALUE
On success, setns() returns
      0. On failure, −1 is returned and errno is set to indicate the error.

 
ERRORS

EBADF

fd is not a
            valid file descriptor.

EINVAL

fd refers to
            a namespace whose type does not match that specified in
            nstype, or
            there is problem with reassociating the the thread with
            the specified namespace.

ENOMEM

Cannot allocate sufficient memory to change the
            specified namespace.

EPERM

The calling thread did not have the required
            privilege (CAP_SYS_ADMIN)
            for this operation.

 
VERSIONS
The setns() system call
      first appeared in Linux in kernel 3.0

 
CONFORMING TO
The setns() system call is
      Linux-specific.

 
NOTES
Not all of the attributes that can be shared when a new
      thread is created using clone(2) can be changed
      using setns().

 
BUGS
The PID namespace and the mount namespace are not
      currently supported. (See the descriptions of CLONE_NEWPID and CLONE_NEWNS in clone(2).)

 
SEE ALSO
clone(2), fork(2), vfork(2), proc(5), unix(7)

 
COLOPHON
This page is part of release 3.35 of the Linux man-pages project. A
      description of the project, and information about reporting
      bugs, can be found at http://man7.org/linux/man-pages/.

                    Copyright (C) 2011, Eric Biederman <ebiedermdocument.write('@');(@)xmission.com>

                  Licensed under the GPLv2

