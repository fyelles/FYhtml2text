

Linux
          manual pages
Section 2
 

 
 

Name
epoll_create, epoll_create1 — open an epoll file
      descriptor

Synopsis

#include <sys/epoll.h>

int
            epoll_create(
int size);

           
        

int
            epoll_create1(
int flags);

           
        

 
DESCRIPTION
epoll_create() creates an
      epoll "instance", requesting the kernel to allocate an event
      backing store dimensioned for size descriptors. The
      size is not the
      maximum size of the backing store but just a hint to the
      kernel about how to dimension internal structures. (Nowadays,
      size is unused; see
      NOTES below.)
epoll_create() returns a
      file descriptor referring to the new epoll instance. This
      file descriptor is used for all the subsequent calls to the
      epoll interface.
      When no longer required, the file descriptor returned by
      epoll_create() should be closed
      by using close(2). When all file
      descriptors referring to an epoll instance have been closed,
      the kernel destroys the instance and releases the associated
      resources for reuse.
If flags is 0,
      then, other than the fact that the obsolete size argument is dropped,
      epoll_create1() is the same as
      epoll_create(). The following
      value can be included in flags to obtain different
      behavior:

EPOLL_CLOEXEC

Set the close-on-exec (FD_CLOEXEC) flag on the new file
            descriptor. See the description of the O_CLOEXEC flag in open(2) for reasons
            why this may be useful.

 
RETURN VALUE
On success, these system calls return a nonnegative file
      descriptor. On error, −1 is returned, and errno is set to indicate the error.

 
ERRORS

EINVAL

size is not
            positive.

EINVAL

(epoll_create1())
            Invalid value specified in flags.

EMFILE

The per-user limit on the number of epoll instances
            imposed by /proc/sys/fs/epoll/max_user_instances
            was encountered. See epoll(7) for further
            details.

ENFILE

The system limit on the total number of open files
            has been reached.

ENOMEM

There was insufficient memory to create the kernel
            object.

 
VERSIONS
epoll_create() was added to
      the kernel in version 2.6. Library support is provided in
      glibc starting with version 2.3.2.
epoll_create1() was added to
      the kernel in version 2.6.27. Library support is provided in
      glibc starting with version 2.9.

 
CONFORMING TO
epoll_create() is
      Linux-specific.

 
NOTES
Since Linux 2.6.8, the size argument is unused, but
      must be greater than zero. (The kernel dynamically sizes the
      required data structures without needing this initial
      hint.)

 
SEE ALSO
close(2), epoll_ctl(2), epoll_wait(2), epoll(7)

 
COLOPHON
This page is part of release 3.33 of the Linux man-pages project. A
      description of the project, and information about reporting
      bugs, can be found at http://man7.org/linux/man-pages/.

                   epoll by Davide Libenzi ( efficient event notification retrieval )

                   Copyright (C) 2003  Davide Libenzi

                   This program is free software; you can redistribute it and/or modify

                   it under the terms of the GNU General Public License as published by

                   the Free Software Foundation; either version 2 of the License, or

                   (at your option) any later version.

                   This program is distributed in the hope that it will be useful,

                   but WITHOUT ANY WARRANTY; without even the implied warranty of

                   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the

                   GNU General Public License for more details.

                   You should have received a copy of the GNU General Public License

                   along with this program; if not, write to the Free Software

                   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

                   Davide Libenzi <davideldocument.write('@');(@)xmailserver.org>

                  Modified 2004-06-17 by Michael Kerrisk <mtk.manpagesdocument.write('@');(@)gmail.com>

                  Modified 2005-04-04 by Marko Kohtala <marko.kohtaladocument.write('@');(@)gmail.com>

                  2008-10-10, mtk: add description of epoll_create1()

